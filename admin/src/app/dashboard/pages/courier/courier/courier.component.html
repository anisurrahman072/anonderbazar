<section>
    <nz-card class="card-height">
        <ng-template #title>
            Courier Company List
        </ng-template>
        <ng-template #extra>
            <button *ngIf="'courier-list'|accessControl" nz-button [nzType]="'primary'" (click)="showModal()" [nzSize]="'large'">
                <i class="anticon anticon-download"></i>
                <span> Add New </span>
            </button>
        </ng-template>
        <ng-template #body>
            <nz-spin [nzSpinning]="_isSpinning">
                <div class="table-operations">
                </div>
                <nz-table #nzTable [nzDataSource]="data" [nzIsPagination]="true" nzSize="large">
                    <thead nz-thead>
                        <tr>
                            <th nz-th>
                                <span>Courier</span>
                            </th>
                            <th nz-th>
                                <span>Origin Type</span>
                            </th>
                            <th nz-th>
                                <span>Action</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody nz-tbody>
                        <tr nz-tbody-tr #dataFor *ngFor="let data of nzTable.data;let i=index">
                            <td nz-td>
                                {{data.name}}
                            </td>
                            <td nz-td>
                                {{origins[data.origin_type-1]}}
                            </td>
                            <!--trying-->
                            <td>
                                <nz-button-group>
                                    <button *ngIf="'courier-edit'|accessControl" (click)="showEditModal(data.id)"
                                        nz-button [nzType]="'primary'" [nzSize]="'default'">
                                        <i class="anticon anticon-edit"></i>
                                    </button>
                                </nz-button-group>
                            <ng-container *ngIf="'courier-delete'|accessControl">
                                <nz-popconfirm
                                        [nzTitle]="'Are you sure you want to delete?'" [nzOkText]="'Delete'"
                                        [nzCancelText]="'Cancel'"
                                        (nzOnConfirm)="deleteConfirm(data.id)">
                                    <a nz-popconfirm>
                                        <button nz-button [nzType]="'danger'" [nzSize]="'default'">
                                            <i class="anticon anticon-delete"> </i>
                                        </button>
                                    </a>
                                </nz-popconfirm>
                            </ng-container>
                            </td>
                        </tr>
                    </tbody>
                </nz-table>
            </nz-spin>
        </ng-template>
    </nz-card>
</section>

 <nz-modal [nzFooter]="null" [nzVisible]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" (nzOnCancel)="handleCancel($event)">
    <ng-template #modalTitle>
        Courier Company Add
    </ng-template>
    <ng-template #modalContent>
        <div class="row">
            <form nz-form [formGroup]="validateForm" id="validateForm" (ngSubmit)="submitForm($event,validateForm.value)">
                <div class="col-md-12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label> Courier Name </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="name" [nzType]="'text'" [nzPlaceHolder]="'Courier Enter Name'"
                                [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('required')">
                                Name is required!
                            </div>
                        </div>
                    </div>
                    <!-- courier name -->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="4" nz-form-label>
                            <label>
                                Origin Type
                            </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-select formControlName="origin_type" (ngModelChange)="courierOriginChange($event)"
                                nzMaxMultipleCount="3" style="width: 100%" nzPlaceHolder="Select Origin Type">
                                <nz-option *ngFor="let courier of options" [nzLabel]="courier.label" [nzValue]="courier.value"></nz-option>
                            </nz-select>
                            <div nz-form-explain *ngIf="getFormControl('origin_type').dirty&&getFormControl('origin_type').hasError('required')">
                                Please select !
                            </div>
                        </div>
                    </div>
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="4" nz-form-label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-button-group>
                                <button nz-button type="button" [nzSize]="'large'" (click)="handleCancel($event)">
                                    Cancel
                                </button>
                                <button nz-button [nzType]="'primary'" [nzSize]="'large'" [nzLoading]="isConfirmLoading">
                                    Save
                                </button>
                            </nz-button-group>
                        </div>
                    </div>
                </div>
            </form>
        </div>

    </ng-template>
</nz-modal>

<nz-modal [nzFooter]="null" [nzVisible]="isEditVisible" [nzTitle]="modalTitleEdit" [nzContent]="modalContentEdit" (nzOnCancel)="handleEditCancel($event)">
    <ng-template #modalTitleEdit>
        Courier Company Edit
    </ng-template>
    <ng-template #modalContentEdit>
        <div class="row">
            <form nz-form [formGroup]="validateEditForm" id="validateEditForm" (ngSubmit)="submitEditForm($event,validateEditForm.value)">
                <div class="col-md-12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label> Courier Name </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="name" [nzType]="'text'" [nzPlaceHolder]="'Courier Enter Name'"
                                [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('required')">
                                Name is required!
                            </div>
                        </div>
                    </div>
                    <!-- courier name -->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="4" nz-form-label>
                            <label>
                                Origin Type
                            </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-select formControlName="origin_type" (ngModelChange)="courierOriginChange($event)"
                                nzMaxMultipleCount="3" style="width: 100%" nzPlaceHolder="Select Origin Type">
                                <nz-option *ngFor="let courier of options" [nzLabel]="courier.label" [nzValue]="courier.value"></nz-option>
                            </nz-select>
                            <div nz-form-explain *ngIf="getFormControl('origin_type').dirty&&getFormControl('origin_type').hasError('required')">
                                Please select !
                            </div>
                        </div>
                    </div>
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="4" nz-form-label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-button-group>
                                <button nz-button type="button" [nzSize]="'large'" (click)="handleEditCancel($event)">
                                    Cancel
                                </button>
                                <button nz-button [nzType]="'primary'" [nzSize]="'large'" [nzLoading]="isConfirmLoading">
                                    Save
                                </button>
                            </nz-button-group>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </ng-template>
</nz-modal>
