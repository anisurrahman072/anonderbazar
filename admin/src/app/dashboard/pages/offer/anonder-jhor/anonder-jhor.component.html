<section>
    <nz-card class="card-height" nzTitle="Anonder Jhor" [nzExtra]="extra">
        <ng-template #extra>
            <button (click)="isAnonderJhorEdit = !isAnonderJhorEdit; editAnonderJhor()" nz-button
                    [nzType]="'primary'" [nzSize]="'large'">
                <div *ngIf="!isAnonderJhorEdit; else edit">
                    <i class="anticon anticon-download"></i><span> Edit</span>
                </div>
                <ng-template #edit>
                    <i class="anticon anticon-close"></i><span>Go Back</span>
                </ng-template>
            </button>
        </ng-template>
        <nz-spin [nzSpinning]="_isSpinning">
            <!--anonder jhor read-->
            <ng-container *ngIf="isAnonderJhorEdit === false && anonderJhorData">

                <div nz-row>
                    <div nz-col [nzSpan]="7">
                        <label>Banner Image</label>
                    </div>
                    <div nz-col [nzSpan]="12">
                        <img class="product-image" src="{{IMAGE_ENDPOINT + anonderJhorData.banner_image }}"
                             alt="Product Image">
                    </div>
                </div>

                <div nz-row>
                    <div nz-col [nzSpan]="7">
                        <label>Start Date</label>
                    </div>
                    <div nz-col [nzSpan]="12">
                        <p>{{anonderJhorData.start_date | date : 'medium'}}</p>
                    </div>
                </div>

                <div nz-row>
                    <div nz-col [nzSpan]="7">
                        <label>End Date</label>
                    </div>
                    <div nz-col [nzSpan]="12">
                        <p>{{anonderJhorData.end_date | date : 'medium'}}</p>
                    </div>
                </div>

                <div nz-row>
                    <div nz-col [nzSpan]="7">
                        <label>Status</label>
                    </div>
                    <div *ngIf="anonderJhorData.status; else inactive">
                        <nz-switch [ngModel]="status"
                                   (ngModelChange)="jhorActiveStatusChange($event)">
                        </nz-switch>
                    </div>
                    <ng-template #inactive>
                        <nz-switch [ngModel]="status"
                                   (ngModelChange)="jhorActiveStatusChange($event)">
                        </nz-switch>
                    </ng-template>
                </div>

            </ng-container>
            <!--anonder jhor read ends -->

            <!--edit section-->
            <ng-container *ngIf="isAnonderJhorEdit">

                <form nz-form [formGroup]="validateForm" id="validateForm"
                      (ngSubmit)="submitForm($event,validateForm.value)">
                    <!--banner image-->
                    <div nz-row *ngIf="AnonderJhorBannerImageFileEdit">
                        <div nz-col [nzSpan]="7">
                            <label>Banner Image</label>
                        </div>
                        <div nz-col [nzSpan]="12">
                            <image-upload [max]="1" (removed)="onJhorBannerRemoved($event)"
                                          [uploadedFiles]='AnonderJhorBannerImageFileEdit'
                                          [beforeUpload]="onBeforejhorBannerUpload">
                            </image-upload>
                            <div *ngIf="!anonderJhorBannerImageFile">
                                Please upload a banner image here!
                            </div>
                        </div>
                    </div>

                    <!--Offer Duration-->
                    <div nz-row style="margin: 20px 0;">
                        <div nz-col [nzSpan]="7">
                            <label>Offer Duration</label>
                        </div>
                        <div nz-col [nzSpan]="12">
                            <nz-date-picker
                                    nzShowTime
                                    nzFormat="yyyy-MM-dd HH:mm:ss"
                                    formControlName="startDate"
                                    nzPlaceHolder="Start Date">
                            </nz-date-picker>
                            <div *ngIf="getFormControl('startDate').dirty&&getFormControl('startDate').hasError('required')"
                                 style="color: red">
                                Please set start-date & time
                            </div>
                            <nz-date-picker
                                    nzShowTime
                                    nzFormat="yyyy-MM-dd HH:mm:ss"
                                    formControlName="endDate"
                                    nzPlaceHolder="End Date">
                            </nz-date-picker>
                            <div *ngIf="getFormControl('endDate').dirty&&getFormControl('endDate').hasError('required')"
                                 style="color: red">
                                Please set end-date & time
                            </div>
                        </div>
                    </div>

                    <div nz-row>
                        <div nz-col [nzOffset]="7" [nzSpan]="12">
                            <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="!validateForm.valid">
                                Save
                            </button>
                            <button nz-button [nzSize]="'large'" (click)="resetForm($event)"> Reset</button>
                        </div>
                    </div>
                </form>

            </ng-container>
            <!--edit section ends-->
        </nz-spin>
    </nz-card>
</section>
