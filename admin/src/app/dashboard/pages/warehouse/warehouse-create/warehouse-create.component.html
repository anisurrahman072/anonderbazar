<nz-card>
    <ng-template #title>
        Shop registration
    </ng-template>
    <ng-template #extra>
        <button routerLink="/dashboard/warehouse" nz-button [nzType]="'primary'" [nzSize]="'large'">
            <i class="anticon anticon-file-text"></i>
            <span> List </span>
        </button>
    </ng-template>
    <ng-template #body>
        <form nz-form [formGroup]="validateForm" id="validateForm" (ngSubmit)="submitForm($event,validateForm.value)">
            <nz-steps [(nzCurrent)]="current">
                <nz-step (click)="current=0" [nzTitle]="'Owner Info'"></nz-step>
                <nz-step (click)="current=1" [nzTitle]="'Shop Details'"></nz-step>
            </nz-steps>
            <div class="steps-content">
                <div *ngIf="current === 0" class="step">
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Picture</label>
                        </div>
                        <div nz-col [nzSpan]="12">
                            <image-upload [max]="1" buttonCaption="Select Picture"
                                          dropBoxMessage="Drag here" clearButtonCaption="clear"
                                          (removed)="onRemoved($event)"
                                          [beforeUpload]="onBeforeUpload"></image-upload>
                        </div>
                    </div>
                    <!-- image -->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>First name</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="first_name" [nzType]="'text'" [nzPlaceHolder]="'Write the first part of the name'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('first_name').dirty&&getFormControl('first_name').hasError('required')">
                               Please enter the first part of the name!
                            </div>
                        </div>
                    </div>
                    <!--first_name-->

                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Last name</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="last_name" [nzType]="'text'" [nzPlaceHolder]="'Enter Last name'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('last_name').dirty&&getFormControl('last_name').hasError('required')">
                                Last name is required!
                            </div>
                        </div>
                    </div>
                    <!--last_name-->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label> Gender </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-select formControlName="gender" nzAllowClear [nzPlaceHolder]="'Select Gender'"
                                       [nzFilter]="true" [nzNotFoundContent]="'Not found'" nzShowSearch>
                                <nz-option *ngFor="let option of genderSearchOptions" [nzLabel]="option.label"
                                           [nzValue]="option.value">
                                </nz-option>
                            </nz-select>
                            <div nz-form-explain *ngIf="getFormControl('gender').dirty&&getFormControl('gender').hasError('required')">
                                 Gender is required !
                            </div>
                        </div>
                    </div>
                    <!--gender-->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Phone</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="phone" [nzType]="'text'" [nzId]="'phone_number'"
                                      [nzPlaceHolder]="'Enter Phone Number'" [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('phone').dirty&&getFormControl('phone').hasError('required')">
                                Phone Number is required!
                            </div>
                            <div nz-form-explain
                                 *ngIf="getFormControl('phone').dirty&&getFormControl('phone').hasError('phoneNumber')">
                                Enter right Phone Number!
                            </div>
                        </div>
                    </div>
                    <!--phone-->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Email</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="email" [nzType]="'email'"
                                      [nzPlaceHolder]="'Please Enter Email'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('email').dirty&&getFormControl('email').hasError('required')">
                                Email is required!
                            </div>
                            <div nz-form-explain
                                 *ngIf="getFormControl('email').dirty&&getFormControl('email').hasError('email')">
                                Enter right email !
                            </div>
                        </div>
                    </div>
                    <!--email-->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>NID Card No.</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="national_id" [nzType]="'number'" nzMin="'0'"
                                      [nzPlaceHolder]="'Enter National Identity Card No.'" [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('national_id').dirty&&getFormControl('national_id').hasError('required')">
                                NID No is required!
                            </div>
                        </div>
                    </div>
                    <!--National id-->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>License no</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="license_no" [nzType]="'text'"
                                      [nzPlaceHolder]="'Please Enter License no'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('license_no').dirty&&getFormControl('license_no').hasError('required')">
                                License no is required
                            </div>
                        </div>
                    </div>
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Tin number</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="tin_no" [nzType]="'number'"
                                      [nzPlaceHolder]="'Please Enter Tin Number'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('tin_no').dirty&&getFormControl('tin_no').hasError('required')">
                                Tin number is required!
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="current === 1" class="step">
                    <div nz-form-item nz-row>
                        <!--name start-->
                        <div nz-form-label nz-col [nzSpan]="7">
                            <label>Shop name</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="name" [nzType]="'text'"
                                      [nzPlaceHolder]="'Name'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('required')">
                                Name is required!
                            </div>
                            <div nz-form-explain
                                 *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('duplicated')">
                                Name already exists!
                            </div>
                            <div nz-form-explain
                                 *ngIf="getFormControl('name').dirty&&getFormControl('name').pending">
                                Validating...
                            </div>
                        </div>
                    </div>
                    <!--name -->
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="7">
                            <label> Username </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="username" [nzType]="'text'" [nzPlaceHolder]="'UserName'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('username').dirty&&getFormControl('username').hasError('required')">
                                required!
                            </div>
                            <div nz-form-explain *ngIf="getFormControl('username').dirty&&getFormControl('username').hasError('taken')">
                                "{{getFormControl('username').value}}" Already used!
                            </div>
                            <div nz-form-explain *ngIf="getFormControl('username').dirty&&getFormControl('username').pending">
                                Verifying ...
                            </div>
                        </div>
                    </div>
                    <!--username -->

                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="7">
                            <label> Password </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input [(ngModel)]="pass" formControlName="password" [nzType]="'password'"
                                      [nzPlaceHolder]="'Enter password'" [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain *ngIf="getFormControl('password').dirty&&getFormControl('password').hasError('required')">
                                required!
                            </div>

                        </div>
                    </div>
                    <!--password -->

                    <div nz-form-item nz-row *ngIf="pass">
                        <div nz-form-label nz-col [nzSpan]="7">
                            <label> Confirm password </label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="confirmPassword" [nzType]="'password'" [nzPlaceHolder]="'Confirm password'"
                                      [nzSize]="'large'">
                            </nz-input>

                            <div nz-form-explain *ngIf="getFormControl('confirmPassword').dirty&&getFormControl('confirmPassword').hasError('confirm')">
                                password not matcing!
                            </div>

                        </div>
                    </div>
                    <!--confirmPassword -->

                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Division</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>

                            <nz-select formControlName="division_id" nzAllowClear
                                       [nzPlaceHolder]="'select division'"
                                       [nzFilter]="true" (ngModelChange)="divisionChange($event)"
                                       (nzSearchChange)="divisionSearchChange($event)"
                                       [nzNotFoundContent]="'Not found'" nzShowSearch>
                                <nz-option *ngFor="let option of divisionSearchOptions" [nzLabel]="option.name"
                                           [nzValue]="option.id">
                                </nz-option>
                            </nz-select>


                            <div nz-form-explain
                                 *ngIf="getFormControl('division_id').dirty&&getFormControl('division_id').hasError('required')">
                                required!
                            </div>
                        </div>
                    </div>
                    <!--division-->
                    <div nz-form-item nz-row *ngIf="validateForm.controls.division_id.value">

                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>District</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>

                            <nz-select formControlName="zila_id" nzAllowClear
                                       [nzPlaceHolder]="'Select District'"
                                       [nzFilter]="true" (ngModelChange)="zilaChange($event)"
                                       (nzSearchChange)="zilaSearchChange($event)"
                                       [nzNotFoundContent]="'Not found'" nzShowSearch>
                                <nz-option *ngFor="let option of zilaSearchOptions" [nzLabel]="option.name"
                                           [nzValue]="option.id">
                                </nz-option>
                            </nz-select>
                            <div nz-form-explain
                                 *ngIf="getFormControl('zila_id').dirty&&getFormControl('zila_id').hasError('required')">
                                required!
                            </div>
                        </div>
                    </div>
                    <!--zila-->
                    <div nz-form-item nz-row
                         *ngIf="validateForm.controls.division_id.value && validateForm.controls.zila_id.value">
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Upazila</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-select formControlName="upazila_id" nzAllowClear
                                       [nzPlaceHolder]="'Select Upazila'"
                                       [nzFilter]="true" (nzSearch)="upazilaSearchChange($event)"
                                       (nzSearchChange)="upazilaSearchChange($event)"
                                       [nzNotFoundContent]="'Not found'" nzShowSearch>
                                <nz-option *ngFor="let option of upazilaSearchOptions" [nzLabel]="option.name"
                                           [nzValue]="option.id">
                                </nz-option>
                            </nz-select>
                            <div nz-form-explain
                                 *ngIf="getFormControl('upazila_id').dirty&&getFormControl('upazila_id').hasError('required')">
                                required!
                            </div>
                        </div>
                    </div>
                    <!--upazila-->

                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Address</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                        <textarea nz-input [placeholder]="'Enter Address'" formControlName="address"
                                  [nzSize]="'large'">
                                </textarea>
                            <div nz-form-explain
                                 *ngIf="getFormControl('address').dirty&&getFormControl('address').hasError('required')">
                                required!
                            </div>
                        </div>
                    </div>
                    <!--address-->

                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Post code</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <nz-input formControlName="postal_code" [nzType]="'number'"
                                      [nzPlaceHolder]="'Post code'"
                                      [nzSize]="'large'">
                            </nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('postal_code').dirty&&getFormControl('postal_code').hasError('required')">
                                required!
                            </div>
                        </div>
                    </div>
                    <!--postal-->
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Logo</label>
                        </div>
                        <div nz-col [nzSpan]="12">
                            <image-upload [max]="1" buttonCaption="Select Logo"
                                          dropBoxMessage="Drag here" clearButtonCaption="clear"
                                          (removed)="onLogoRemoved($event)"
                                          [beforeUpload]="onBeforeLogoUpload"></image-upload>

                        </div>
                    </div>
                    <div nz-form-item nz-row>
                        <div nz-col [nzSpan]="7" nz-form-label>
                            <label>Invoice footer</label>
                        </div>
                        <div nz-col [nzSpan]="12" nz-form-control nzHasFeedback>
                            <ckeditor formControlName="invoice_footer" [config]="ckConfig" [readonly]="false"
                                      debounce="500">

                            </ckeditor>
                            <div nz-form-explain
                                 *ngIf="getFormControl('invoice_footer').dirty&&getFormControl('invoice_footer').hasError('required')">
                                required!
                            </div>
                        </div>
                    </div>
                    <!--invoiceFooter-->
                </div>
            </div>

            <div class="steps-action">
                <div nz-form-item nz-row>
                    <div nz-col [nzOffset]="2" [nzSpan]="12" nz-form-control>
                        <button nz-button nzType="default" type="button" [nzSize]="'large'" (click)="current=0" *ngIf="current > 0">
                            <span>Previous</span>
                        </button>
                        <button nz-button nzType="default" type="button" [nzSize]="'large'" (click)="current=1" *ngIf="current < 1">
                            <span>Next</span>
                        </button>
                        <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="!validateForm.valid || submitting">
                            Save
                        </button>
                        <button nz-button [nzSize]="'large'" (click)="resetForm($event)">Reset</button>
                    </div>
                </div>
            </div>

        </form>
    </ng-template>
</nz-card>
